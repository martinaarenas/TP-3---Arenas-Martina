{% extends "base.html" %}
{% block title %}Planes – SandsGym{% endblock %}
{% block content %}

<div class="row justify-content-center mb-4">
  <div class="col-md-8 col-lg-6 text-center">
    <a href="{% url 'registrar_plan' %}" class="btn btn-success mb-3">
      Registrar plan
    </a>
  </div>
</div>

<h2 class="text-center mb-3">Planes</h2>

<div class="table-responsive">
  <table class="table table-sm align-middle">
    <thead class="table-light">
      <tr>
        <th>Plan</th>
        <th>Precio mensual</th>
        <th>Descripción</th>
        <th>Socios adheridos</th>
        <th>Actualizar precio</th>
      </tr>
    </thead>
    <tbody>
      {% for p in planes %}
      <tr>
        <td class="fw-semibold">{{ p.tipo_plan }}</td>
        <td>${{ p.precio_mensual|floatformat:0 }}</td>
        <td>{{ p.descripcion|default:"—" }}</td>
        <td>{{ p.socios.count }}</td>
        <td>
          <form method="post" class="d-flex gap-2 align-items-center">
            {% csrf_token %}
            <input type="number" name="precio_mensual" step="1000" min="0"
                    value="{{ p.precio_mensual|floatformat:0 }}" style="max-width:9rem">
            <button type="submit" name="plan_id" value="{{ p.id }}" class="btn btn-sm btn-outline-primary">
              Guardar
            </button>
        </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center text-muted">No hay planes cargados.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}


